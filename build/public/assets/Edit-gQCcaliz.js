import{L as R}from"./Layout-BiShtRex.js";import{T as b,m as _,a as i,l as y,f as h,o as d,b as s,w as u,d as m,c as v,x as w,v as V}from"./app-0IfQhdzz.js";import{_ as k}from"./_plugin-vue_export-helper-DlAUqK2U.js";const q={__name:"Edit",props:{item:Object,availableResources:Array},setup(c,{expose:n}){n();const l=c,t=b({name:l.item.name,resources:l.item.resources.map(e=>({id:e.id,quantity:e.quantity_required,selectedResource:null,name:e.name}))});_(()=>{t.resources.forEach(e=>{e.selectedResource=l.availableResources.find(o=>o.id===e.id)})});const a={props:l,form:t,addResource:()=>{t.resources.push({selectedResource:null,id:null,quantity:1})},removeResource:e=>{t.resources.splice(e,1)},updateResourceId:e=>{const o=t.resources[e];o.selectedResource&&(o.id=o.selectedResource.id,o.name=o.selectedResource.name)},submit:()=>{const e={name:t.name,resources:t.resources.reduce((o,r)=>(r.id&&(o[r.id]={quantity:r.quantity}),o),{})};t.put(`/items/${l.item.id}`,e)},Layout:R,get useForm(){return b},onMounted:_};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},I={class:"bg-gray-100 min-h-screen flex items-center justify-center"},C={class:"bg-white p-8 rounded-lg shadow-md w-full max-w-md"},j={class:"mb-4"},U={class:"mb-4"},B={class:"flex-grow mr-2"},E={class:"w-32"},L=["onClick"],N=["disabled"];function S(c,n,l,t,x,g){const p=i("TextInput"),f=i("Select"),a=i("InputNumber");return d(),y(t.Layout,null,{default:h(()=>[s("div",I,[s("div",C,[n[4]||(n[4]=s("h1",{class:"text-2xl font-bold text-gray-800 mb-6"},"Modifier l'item",-1)),s("form",{onSubmit:u(t.submit,["prevent"])},[s("div",j,[n[1]||(n[1]=s("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),m(p,{modelValue:t.form.name,"onUpdate:modelValue":n[0]||(n[0]=e=>t.form.name=e),id:"name",required:"",fluid:""},null,8,["modelValue"])]),s("div",U,[n[3]||(n[3]=s("label",{class:"block text-sm font-medium text-gray-700"},"Ressources",-1)),(d(!0),v(V,null,w(t.form.resources,(e,o)=>(d(),v("div",{key:o,class:"flex items-center mt-2"},[s("div",B,[m(f,{modelValue:e.selectedResource,"onUpdate:modelValue":r=>e.selectedResource=r,options:l.availableResources,optionLabel:"name",placeholder:"Ajouter une ressource",class:"w-full",filter:"",onChange:r=>t.updateResourceId(o)},null,8,["modelValue","onUpdate:modelValue","options","onChange"])]),s("div",E,[m(a,{modelValue:e.quantity,"onUpdate:modelValue":r=>e.quantity=r,mode:"decimal",showButtons:"",min:1,max:99999},null,8,["modelValue","onUpdate:modelValue"])]),s("button",{onClick:u(r=>t.removeResource(o),["prevent"]),class:"ml-2 text-red-600 hover:text-red-800"},[...n[2]||(n[2]=[s("i",{class:"pi pi-times"},null,-1)])],8,L)]))),128)),s("button",{onClick:u(t.addResource,["prevent"]),class:"mt-2 text-indigo-600 hover:text-indigo-800"}," + Ajouter une ressource ")]),s("button",{type:"submit",class:"w-full bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300",disabled:t.form.processing}," Mettre Ã  jour ",8,N)],32)])])]),_:1})}const D=k(q,[["render",S],["__file","/Users/florian/Desktop/recipz/inertia/pages/Items/Edit.vue"]]);export{D as default};
