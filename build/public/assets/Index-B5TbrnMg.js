import{L as V}from"./Layout-BiShtRex.js";import{u as C,r as p,y as h,T as M,a as i,c as v,d as s,f as d,b as t,t as j,w as q,e as A,v as F,i as R,k as S,o as y}from"./app-0IfQhdzz.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";const T={__name:"Index",props:{inventory:Array,availableResources:Array},setup(c,{expose:e}){e();const u=C(),o=p(!1),g=p(""),x=l=>a.inventory.findIndex(n=>n.resource.id===(l==null?void 0:l.id))!==-1,a=c,b=p({global:{value:null,matchMode:h.CONTAINS}}),r=M({resource:null,quantity:1}),f={confirm:u,isModalOpen:o,filterSeach:g,isFormResourceAlreadyInInventory:x,props:a,filters:b,form:r,closeModal:()=>{o.value=!1,r.resource=null,r.quantity=1},addRessourceToInventory:()=>{!r.resource||!r.quantity||(r.post("/inventory/add",{ressource:r.resource,quantity:r.quantity}),o.value=!1)},updateInventory:l=>{var n;r.resource=l,r.quantity=((n=a.inventory.find(_=>_.resource.id===l.id))==null?void 0:n.quantity)||1,o.value=!0},confirmDelete:l=>{u.require({message:`Voulez vous supprimer ${l.name} de votre inventaire?`,header:"Suppression de ressource",icon:"pi pi-info-circle",rejectLabel:"Annuler",rejectProps:{label:"Annuler",severity:"secondary",outlined:!0},acceptProps:{label:"Supprimer",severity:"danger"},accept:()=>{r.delete(`/inventory/${l.id}`)},reject:()=>{console.log("reject")}})},Layout:V,get useForm(){return M},get Link(){return R},ref:p,computed:S,get FilterMatchMode(){return h},get useConfirm(){return C}};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}},B={class:"bg-gray-900 shadow overflow-hidden sm:rounded-lg"},L={class:"flex justify-between items-center"},N={class:"px-4 py-5 sm:p-6"},O={key:0},U={key:1},z={class:"flex justify-end mb-2"},P={class:"flex justify-end"},Q={key:0},E={class:"fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center"},G={class:"relative bg-gray-900 p-8 rounded-lg shadow-md w-full max-w-md"},H={class:"text-2xl font-bold text-gray-200 mb-6"},J={class:"mb-4"},K={class:"flex flex-between gap-2"},W={class:"w-3/4"},X={class:"w-1/4"};function Y(c,e,u,o,g,x){const a=i("Button"),b=i("ConfirmDialog"),r=i("InputIcon"),I=i("InputText"),w=i("IconField"),m=i("Column"),k=i("DataTable"),f=i("Select"),l=i("InputNumber");return y(),v(F,null,[s(o.Layout,null,{default:d(()=>[t("div",B,[t("div",L,[e[7]||(e[7]=t("div",{class:"px-4 py-5 sm:px-6"},[t("h1",{class:"text-2xl font-bold text-gray-200"},"Mon inventaire de ressources")],-1)),s(a,{icon:"pi pi-plus-circle",label:"Ajouter une ressource",onClick:e[0]||(e[0]=n=>o.isModalOpen=!0),class:"mr-6 text-gray-200"})]),t("div",N,[s(b),u.inventory.length?(y(),v("div",U,[s(k,{filters:o.filters,"onUpdate:filters":e[2]||(e[2]=n=>o.filters=n),value:u.inventory,globalFilterFields:["resource.name"]},{default:d(()=>[t("div",z,[s(w,null,{default:d(()=>[s(r,null,{default:d(()=>e[9]||(e[9]=[t("i",{class:"pi pi-search"},null,-1)])),_:1}),s(I,{modelValue:o.filters.global.value,"onUpdate:modelValue":e[1]||(e[1]=n=>o.filters.global.value=n),placeholder:"Rechercher"},null,8,["modelValue"])]),_:1})]),s(m,{field:"resource.name",header:"Ressource"}),s(m,{field:"quantity",header:"Quantité"}),s(m,null,{body:d(({data:n})=>[t("div",P,[s(a,{icon:"pi pi-pencil",class:"mr-2 p-button-outlined p-button-primary",onClick:_=>o.updateInventory(n.resource)},null,8,["onClick"]),s(a,{icon:"pi pi-trash",class:"p-button-danger",onClick:_=>o.confirmDelete(n.resource)},null,8,["onClick"])])]),_:1})]),_:1},8,["filters","value"])])):(y(),v("div",O,e[8]||(e[8]=[t("p",null,"Vous n'avez pas encore de ressources dans votre inventaire.",-1)])))])])]),_:1}),o.isModalOpen?(y(),v("div",Q,[t("div",E,[t("div",G,[t("button",{onClick:o.closeModal,class:"absolute top-0 right-0 p-4"},e[10]||(e[10]=[t("svg",{class:"h-6 w-6 text-gray-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),t("h1",H,j(o.isFormResourceAlreadyInInventory(o.form.resource)?"Modifier une ressource":"Ajouter une ressource"),1),t("form",{onSubmit:e[6]||(e[6]=q((...n)=>c.submit&&c.submit(...n),["prevent"]))},[t("div",J,[t("div",K,[t("div",W,[e[11]||(e[11]=t("label",{for:"resourceId",class:"block text -sm font-medium text-gray-200"},"Ressource",-1)),s(f,{modelValue:o.form.resource,"onUpdate:modelValue":e[3]||(e[3]=n=>o.form.resource=n),options:u.availableResources,optionLabel:"name",placeholder:"Ajouter une ressource",class:"text-gray-200 w-full",filter:""},null,8,["modelValue","options"])]),t("div",X,[e[12]||(e[12]=t("label",{for:"resourceId",class:"block text -sm font-medium text-gray-200"},"Quantité",-1)),s(l,{modelValue:o.form.quantity,"onUpdate:modelValue":e[4]||(e[4]=n=>o.form.quantity=n),inputId:"minmax-buttons",mode:"decimal",showButtons:"",min:1,max:99999,fluid:"",class:"text-gray-200"},null,8,["modelValue"])])])]),s(a,{label:"Valider",class:"w-full",onClick:e[5]||(e[5]=n=>o.addRessourceToInventory())})],32)])])])):A("v-if",!0)],64)}const oe=D(T,[["render",Y],["__file","/Users/florian/Desktop/recipz/inertia/pages/Inventory/Index.vue"]]);export{oe as default};
